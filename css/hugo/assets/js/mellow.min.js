!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).mellow={})}(this,(function(e){"use strict";const t="transitionend",n=e=>{const t=(e=>{let t=e.getAttribute("data-mellow-target");if(!t||"#"===t){let n=e.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),t=n&&"#"!==n?n.trim():null}return t})(e);return t?document.querySelector(t):null},i=e=>!(!e||"object"!=typeof e)&&(void 0!==e.jquery&&(e=e[0]),void 0!==e.nodeType),s=e=>i(e)?e.jquery?e[0]:e:"string"==typeof e&&e.length>0?document.querySelector(e):null,o=e=>{if(!i(e)||0===e.getClientRects().length)return!1;const t="visible"===getComputedStyle(e).getPropertyValue("visibility"),n=e.closest("details:not([open])");if(!n)return t;if(n!==e){const t=e.closest("summary");if(t&&t.parentNode!==n)return!1;if(null===t)return!1}return t},r=e=>!e||e.nodeType!==Node.ELEMENT_NODE||(!!e.classList.contains("disabled")||(void 0!==e.disabled?e.disabled:e.hasAttribute("disabled")&&"false"!==e.getAttribute("disabled"))),a=e=>{e.offsetHeight},l=()=>window.jQuery&&!document.body.hasAttribute("data-mellow-no-jquery")?window.jQuery:null,c=[],u=e=>{var t;t=()=>{const t=l();if(t){const n=e.NAME,i=t.fn[n];t.fn[n]=e.jQueryInterface,t.fn[n].Constructor=e,t.fn[n].noConflict=()=>(t.fn[n]=i,e.jQueryInterface)}},"loading"===document.readyState?(c.length||document.addEventListener("DOMContentLoaded",(()=>{for(const e of c)e()})),c.push(t)):t()},d=e=>{"function"==typeof e&&e()},f=(e,n,i=!0)=>{if(!i)return void d(e);const s=(e=>{if(!e)return 0;let{transitionDuration:t,transitionDelay:n}=window.getComputedStyle(e);const i=Number.parseFloat(t),s=Number.parseFloat(n);return i||s?(t=t.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(t)+Number.parseFloat(n))):0})(n)+5;let o=!1;const r=({target:i})=>{i===n&&(o=!0,n.removeEventListener(t,r),d(e))};n.addEventListener(t,r),setTimeout((()=>{o||n.dispatchEvent(new Event(t))}),s)},h={find:(e,t=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(t,e)),findOne:(e,t=document.documentElement)=>Element.prototype.querySelector.call(t,e),children:(e,t)=>[].concat(...e.children).filter((e=>e.matches(t))),parents(e,t){const n=[];let i=e.parentNode;for(;i&&i.nodeType===Node.ELEMENT_NODE&&3!==i.nodeType;)i.matches(t)&&n.push(i),i=i.parentNode;return n},prev(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return[n];n=n.previousElementSibling}return[]},next(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return[n];n=n.nextElementSibling}return[]},focusableChildren(e){const t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((e=>`${e}:not([tabindex^="-"])`)).join(", ");return this.find(t,e).filter((e=>!r(e)&&o(e)))}};function m(e){return"true"===e||"false"!==e&&(e===Number(e).toString()?Number(e):""===e||"null"===e?null:e)}function g(e){return e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`))}const p={setDataAttribute(e,t,n){e.setAttribute(`data-mellow-${g(t)}`,n)},removeDataAttribute(e,t){e.removeAttribute(`data-mellow-${g(t)}`)},getDataAttributes(e){if(!e)return{};const t={},n=Object.keys(e.dataset).filter((e=>e.startsWith("mellow")));for(const i of n){let n=i.replace(/^mellow/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),t[n]=m(e.dataset[i])}return t},getDataAttribute:(e,t)=>m(e.getAttribute(`data-mellow-${g(t)}`)),offset(e){const t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},position:e=>({top:e.offsetTop,left:e.offsetLeft})},_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",b=".sticky-top",v="padding-right",w="margin-right";class y{constructor(){this._element=document.body}getWidth(){const e=document.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}hide(){const e=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,v,(t=>t+e)),this._setElementAttributes(_,v,(t=>t+e)),this._setElementAttributes(b,w,(t=>t-e))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,v),this._resetElementAttributes(_,v),this._resetElementAttributes(b,w)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(e,t,n){const i=this.getWidth();this._applyManipulationCallback(e,(e=>{if(e!==this._element&&window.innerWidth>e.clientWidth+i)return;this._saveInitialAttribute(e,t);const s=window.getComputedStyle(e).getPropertyValue(t);e.style.setProperty(t,`${n(Number.parseFloat(s))}px`)}))}_saveInitialAttribute(e,t){const n=e.style.getPropertyValue(t);n&&p.setDataAttribute(e,t,n)}_resetElementAttributes(e,t){this._applyManipulationCallback(e,(e=>{const n=p.getDataAttribute(e,t);null!==n?(p.removeDataAttribute(e,t),e.style.setProperty(t,n)):e.style.removeProperty(t)}))}_applyManipulationCallback(e,t){if(i(e))t(e);else for(const n of h.find(e,this._element))t(n)}}const E=/[^.]*(?=\..*)\.|.*/,A=/\..*/,N=/::\d+$/,k={};let C=1;const T={mouseenter:"mouseover",mouseleave:"mouseout"},O=/^(mouseenter|mouseleave)/i,D=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function L(e,t){return t&&`${t}::${C++}`||e.uidEvent||C++}function $(e){const t=L(e);return e.uidEvent=t,k[t]=k[t]||{},k[t]}function S(e,t,n=null){const i=Object.keys(e);for(const s of i){const i=e[s];if(i.originalHandler===t&&i.delegationSelector===n)return i}return null}function M(e,t,n){const i="string"==typeof t,s=i?n:t;let o=P(e);return D.has(o)||(o=e),[i,s,o]}function j(e,t,n,i,s){if("string"!=typeof t||!e)return;if(n||(n=i,i=null),O.test(t)){const e=e=>function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)};i?i=e(i):n=e(n)}const[o,r,a]=M(t,n,i),l=$(e),c=l[a]||(l[a]={}),u=S(c,r,o?n:null);if(u)return void(u.oneOff=u.oneOff&&s);const d=L(r,t.replace(E,"")),f=o?function(e,t,n){return function i(s){const o=e.querySelectorAll(t);for(let{target:r}=s;r&&r!==this;r=r.parentNode)for(let a=o.length;a--;)if(o[a]===r)return s.delegateTarget=r,i.oneOff&&W.off(e,s.type,t,n),n.apply(r,[s]);return null}}(e,n,i):function(e,t){return function n(i){return i.delegateTarget=e,n.oneOff&&W.off(e,i.type,t),t.apply(e,[i])}}(e,n);f.delegationSelector=o?n:null,f.originalHandler=r,f.oneOff=s,f.uidEvent=d,c[d]=f,e.addEventListener(a,f,o)}function x(e,t,n,i,s){const o=S(t[n],i,s);o&&(e.removeEventListener(n,o,Boolean(s)),delete t[n][o.uidEvent])}function I(e,t,n,i){const s=t[n]||{};for(const o of Object.keys(s))if(o.includes(i)){const i=s[o];x(e,t,n,i.originalHandler,i.delegationSelector)}}function P(e){return e=e.replace(A,""),T[e]||e}const W={on(e,t,n,i){j(e,t,n,i,!1)},one(e,t,n,i){j(e,t,n,i,!0)},off(e,t,n,i){if("string"!=typeof t||!e)return;const[s,o,r]=M(t,n,i),a=r!==t,l=$(e),c=t.startsWith(".");if(void 0!==o){if(!l||!l[r])return;return void x(e,l,r,o,s?n:null)}if(c)for(const n of Object.keys(l))I(e,l,n,t.slice(1));const u=l[r]||{};for(const n of Object.keys(u)){const i=n.replace(N,"");if(!a||t.includes(i)){const t=u[n];x(e,l,r,t.originalHandler,t.delegationSelector)}}},trigger(e,t,n){if("string"!=typeof t||!e)return null;const i=l(),s=P(t),o=t!==s,r=D.has(s);let a,c=!0,u=!0,d=!1,f=null;if(o&&i&&(a=i.Event(t,n),i(e).trigger(a),c=!a.isPropagationStopped(),u=!a.isImmediatePropagationStopped(),d=a.isDefaultPrevented()),r?(f=document.createEvent("HTMLEvents"),f.initEvent(s,c,!0)):f=new CustomEvent(t,{bubbles:c,cancelable:!0}),void 0!==n)for(const e of Object.keys(n))Object.defineProperty(f,e,{get:()=>n[e]});return d&&f.preventDefault(),u&&e.dispatchEvent(f),f.defaultPrevented&&void 0!==a&&a.preventDefault(),f}},q=new Map,V={set(e,t,n){q.has(e)||q.set(e,new Map);const i=q.get(e);i.has(t)||0===i.size?i.set(t,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get:(e,t)=>q.has(e)&&q.get(e).get(t)||null,remove(e,t){if(!q.has(e))return;const n=q.get(e);n.delete(t),0===n.size&&q.delete(e)}};class F{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(e){return e=this._mergeConfigObj(e),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}_configAfterMerge(e){return e}_mergeConfigObj(e,t){return{...this.constructor.Default,...i(t)?p.getDataAttributes(t):{},..."object"==typeof e?e:{}}}_typeCheckConfig(e,t=this.constructor.DefaultType){for(const s of Object.keys(t)){const o=t[s],r=e[s],a=i(r)?"element":null==(n=r)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${s}" provided type "${a}" but expected type "${o}".`)}var n}}class K extends F{constructor(e,t){super(),(e=s(e))&&(this._element=e,this._config=this._getConfig(t),V.set(this._element,this.constructor.DATA_KEY,this))}dispose(){V.remove(this._element,this.constructor.DATA_KEY),W.off(this._element,this.constructor.EVENT_KEY);for(const e of Object.getOwnPropertyNames(this))this[e]=null}_queueCallback(e,t,n=!0){f(e,t,n)}_getConfig(e){return e=this._mergeConfigObj(e,this._element),e=this._configAfterMerge(e),this._typeCheckConfig(e),e}static getInstance(e){return V.get(s(e),this.DATA_KEY)}static getOrCreateInstance(e,t={}){return this.getInstance(e)||new this(e,"object"==typeof t?t:null)}static get VERSION(){return"0.1.0"}static get DATA_KEY(){return`mellow.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const Y="backdrop",z="show",R="mousedown.mellow.backdrop",B={className:"modal-backdrop",isVisible:!0,isAnimated:!1,rootElement:"body",clickCallback:null},H={className:"string",isVisible:"boolean",isAnimated:"boolean",rootElement:"(element|string)",clickCallback:"(function|null)"};class Q extends F{constructor(e){super(),this._config=this._getConfig(e),this._isAppended=!1,this._element=null}static get Default(){return B}static get DefaultType(){return H}static get NAME(){return Y}show(e){this._config.isVisible?(this._append(),this._config.isAnimated&&a(this._getElement()),this._getElement().classList.add(z),this._emulateAnimation((()=>{d(e)}))):d(e)}hide(e){this._config.isVisible?(this._getElement().classList.remove(z),this._emulateAnimation((()=>{this.dispose(),d(e)}))):d(e)}dispose(){this._isAppended&&(W.off(this._element,R),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const e=document.createElement("div");e.className=this._config.className,this._config.isAnimated&&e.classList.add("fade"),this._element=e}return this._element}_configAfterMerge(e){return e.rootElement=s(e.rootElement),e}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),W.on(this._getElement(),R,(()=>{d(this._config.clickCallback)})),this._isAppended=!0)}_emulateAnimation(e){f(e,this._getElement(),this._config.isAnimated)}}const U=".mellow.focustrap",X=`focusin${U}`,Z=`keydown.tab${U}`,G="backward",J={trapElement:null,autofocus:!0},ee={trapElement:"element",autofocus:"boolean"};class te extends F{constructor(e){super(),this._config=this._getConfig(e),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return J}static get DefaultType(){return ee}static get NAME(){return"focustrap"}activate(){const{trapElement:e,autofocus:t}=this._config;this._isActive||(t&&e.focus(),W.off(document,U),W.on(document,X,(e=>this._handleFocusin(e))),W.on(document,Z,(e=>this._handleKeydown(e))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,W.off(document,U))}_handleFocusin(e){const{target:t}=e,{trapElement:n}=this._config;if(t===document||t===n||n.contains(t))return;const i=h.focusableChildren(n);0===i.length?n.focus():this._lastTabNavDirection===G?i[i.length-1].focus():i[0].focus()}_handleKeydown(e){"Tab"===e.key&&(this._lastTabNavDirection=e.shiftKey?G:"forward")}}const ne=".mellow.offcanvas",ie=`load${ne}.data-api`,se="show",oe="showing",re="hiding",ae=".offcanvas.show",le=`show${ne}`,ce=`shown${ne}`,ue=`hide${ne}`,de=`hidden${ne}`,fe=`click${ne}.data-api`,he=`keydown.dismiss${ne}`,me={backdrop:!0,keyboard:!0,scroll:!1},ge={backdrop:"boolean",keyboard:"boolean",scroll:"boolean"};class pe extends K{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return me}static get DefaultType(){return ge}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){if(this._isShown)return;if(W.trigger(this._element,le,{relatedTarget:e}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new y).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(oe);this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),this._element.classList.add(se),this._element.classList.remove(oe),W.trigger(this._element,ce,{relatedTarget:e})}),this._element,!0)}hide(){if(!this._isShown)return;if(W.trigger(this._element,ue).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(re),this._backdrop.hide();this._queueCallback((()=>{this._element.classList.remove(se,re),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new y).reset(),W.trigger(this._element,de)}),this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){return new Q({className:"offcanvas-backdrop",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new te({trapElement:this._element})}_addEventListeners(){W.on(this._element,he,(e=>{this._config.keyboard&&"Escape"===e.key&&this.hide()}))}static jQueryInterface(e){return this.each((function(){const t=pe.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}W.on(document,fe,'[data-mellow-toggle="offcanvas"]',(function(e){const t=n(this);if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),r(this))return;W.one(t,de,(()=>{o(this)&&this.focus()}));const i=h.findOne(ae);i&&i!==t&&pe.getInstance(i).hide();pe.getOrCreateInstance(t).toggle(this)})),W.on(window,ie,(()=>{for(const e of h.find(ae))pe.getOrCreateInstance(e).show()})),((e,t="hide")=>{const i=`click.dismiss${e.EVENT_KEY}`,s=e.NAME;W.on(document,i,`[data-mellow-dismiss="${s}"]`,(function(i){if(["A","AREA"].includes(this.tagName)&&i.preventDefault(),r(this))return;const o=n(this)||this.closest(`.${s}`);e.getOrCreateInstance(o)[t]()}))})(pe),u(pe);const _e="active",be="fade",ve="show",we=".active",ye=":scope > li > .active";class Ee extends K{static get NAME(){return"tab"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(_e))return;const e=n(this._element),t=this._element.closest(".nav, .list-group");let i;if(t){const e="UL"===t.nodeName||"OL"===t.nodeName?ye:we;i=h.find(e,t),i=i[i.length-1]}const s=i?W.trigger(i,"hide.mellow.tab",{relatedTarget:this._element}):null;if(W.trigger(this._element,"show.mellow.tab",{relatedTarget:i}).defaultPrevented||null!==s&&s.defaultPrevented)return;this._activate(this._element,t);const o=()=>{W.trigger(i,"hidden.mellow.tab",{relatedTarget:this._element}),W.trigger(this._element,"shown.mellow.tab",{relatedTarget:i})};e?this._activate(e,e.parentNode,o):o()}_activate(e,t,n){const i=(!t||"UL"!==t.nodeName&&"OL"!==t.nodeName?h.children(t,we):h.find(ye,t))[0],s=n&&i&&i.classList.contains(be),o=()=>this._transitionComplete(e,i,n);i&&s?(i.classList.remove(ve),this._queueCallback(o,e,!0)):o()}_transitionComplete(e,t,n){if(t){t.classList.remove(_e);const e=h.findOne(":scope > .dropdown-menu .active",t.parentNode);e&&e.classList.remove(_e),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!1)}e.classList.add(_e),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!0),a(e),e.classList.contains(be)&&e.classList.add(ve);let i=e.parentNode;if(i&&"LI"===i.nodeName&&(i=i.parentNode),i&&i.classList.contains("dropdown-menu")){const t=e.closest(".dropdown");if(t)for(const e of h.find(".dropdown-toggle",t))e.classList.add(_e);e.setAttribute("aria-expanded",!0)}n&&n()}static jQueryInterface(e){return this.each((function(){const t=Ee.getOrCreateInstance(this);if("string"==typeof e){if(void 0===t[e])throw new TypeError(`No method named "${e}"`);t[e]()}}))}}W.on(document,"click.mellow.tab.data-api",'[data-mellow-toggle="tab"], [data-mellow-toggle="pill"], [data-mellow-toggle="list"]',(function(e){if(["A","AREA"].includes(this.tagName)&&e.preventDefault(),r(this))return;Ee.getOrCreateInstance(this).show()})),u(Ee),e.OffCanvas=pe,e.Tab=Ee,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mellow.min.js.map
